---
import { getDailyContent } from '../data/dailyContent';

const dailyContent = getDailyContent();
const today = new Date().toLocaleDateString('en-US', {
  weekday: 'long',
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<section class="daily-reflection-section">
    <div class="container">
        <div class="daily-header">
            <h2>Daily Reflection</h2>
            <p class="date">{today}</p>
        </div>

        <div class="reflection-grid">
            <!-- Scripture of the Day -->
            <div class="reflection-card scripture-card">
                <div class="card-icon">üìñ</div>
                <h3>Scripture for Today</h3>
                <blockquote class="daily-scripture">
                    <span class="quote-text">{dailyContent.scripture.verse}</span>
                    <cite>‚Äî {dailyContent.scripture.reference}</cite>
                </blockquote>
                <p class="reflection-text">{dailyContent.scripture.reflection}</p>
            </div>

            <!-- Saint Quote of the Day -->
            <div class="reflection-card saint-card">
                <div class="card-icon">‚úùÔ∏è</div>
                <h3>Wisdom from the Saints</h3>
                <blockquote class="daily-quote">
                    <span class="quote-text">{dailyContent.saintQuote.quote}</span>
                    <cite>‚Äî {dailyContent.saintQuote.saint}</cite>
                </blockquote>
                <p class="reflection-text">{dailyContent.saintQuote.context}</p>
            </div>

            <!-- Mental Health Tip -->
            <div class="reflection-card tip-card">
                <div class="card-icon">üí°</div>
                <h3>Mental Health Tip</h3>
                <div class="tip-category">{dailyContent.mentalHealthTip.category}</div>
                <p class="tip-content">{dailyContent.mentalHealthTip.tip}</p>
            </div>

            <!-- Prayer Intention -->
            <div class="reflection-card intention-card">
                <div class="card-icon">üôè</div>
                <h3>Prayer Intention</h3>
                <div class="intention-focus">{dailyContent.prayerIntention.focus}</div>
                <p class="intention-content">{dailyContent.prayerIntention.intention}</p>
                <button class="pray-button" onclick="prayIntention()">I'll Pray for This</button>
            </div>

            <!-- Why You Are Important -->
            <div class="reflection-card important-card">
                <div class="card-icon">‚≠ê</div>
                <h3>Why You Are Important</h3>
                <p class="important-message">{dailyContent.whyImportant.message}</p>
                <cite class="source-cite">‚Äî {dailyContent.whyImportant.source}</cite>
            </div>

            <!-- Positive Thought -->
            <div class="reflection-card positive-card">
                <div class="card-icon">üåü</div>
                <h3>Positive Thought</h3>
                <p class="positive-message">{dailyContent.positiveThought.thought}</p>
                <cite class="source-cite">‚Äî {dailyContent.positiveThought.source}</cite>
            </div>
        </div>
    </div>
</section>

<style>
    .daily-reflection-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 4rem 0;
        position: relative;
        overflow: hidden;
    }

    .daily-reflection-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        opacity: 0.3;
    }

    .daily-header {
        text-align: center;
        margin-bottom: 3rem;
        position: relative;
        z-index: 1;
    }

    .daily-header h2 {
        color: white;
        font-size: 2.5rem;
        margin-bottom: 0.5rem;
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.4);
        font-weight: 700;
    }

    .date {
        color: rgba(255, 255, 255, 0.95);
        font-size: 1.1rem;
        font-weight: 500;
        letter-spacing: 0.5px;
    }

    .reflection-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
        position: relative;
        z-index: 1;
    }

    .reflection-card {
        background: white;
        border-radius: var(--radius-xl);
        padding: 2rem;
        box-shadow: var(--shadow-xl);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .reflection-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    }

    .scripture-card::before {
        background: linear-gradient(90deg, #4CAF50, #45a049);
    }

    .saint-card::before {
        background: linear-gradient(90deg, #9C27B0, #7B1FA2);
    }

    .tip-card::before {
        background: linear-gradient(90deg, #FF9800, #F57C00);
    }

    .intention-card::before {
        background: linear-gradient(90deg, #2196F3, #1976D2);
    }

    .important-card::before {
        background: linear-gradient(90deg, #FFD700, #FFA500);
    }

    .positive-card::before {
        background: linear-gradient(90deg, #00BCD4, #0097A7);
    }

    .reflection-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
    }

    .card-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        text-align: center;
    }

    .reflection-card h3 {
        font-size: 1.25rem;
        color: var(--heading-color);
        margin-bottom: 1.5rem;
        text-align: center;
        font-family: var(--font-heading);
    }

    .daily-scripture,
    .daily-quote {
        font-style: italic;
        font-size: 1.05rem;
        line-height: 1.7;
        color: var(--text-color);
        margin: 1.5rem 0;
        padding: 0;
        border: none;
        position: relative;
    }

    .quote-text::before {
        content: '"';
    }

    .quote-text::after {
        content: '"';
    }

    .daily-scripture cite,
    .daily-quote cite {
        display: block;
        font-style: normal;
        font-weight: 600;
        color: var(--primary-color);
        margin-top: 1rem;
        font-size: 0.95rem;
    }

    .reflection-text {
        color: var(--text-muted);
        font-size: 0.95rem;
        line-height: 1.6;
        margin-top: 1rem;
    }

    .tip-category,
    .intention-focus {
        display: inline-block;
        padding: 0.35rem 0.85rem;
        background: var(--primary-light);
        color: var(--primary-dark);
        border-radius: var(--radius-full);
        font-size: 0.8rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 1rem;
    }

    .tip-content,
    .intention-content {
        font-size: 1.05rem;
        line-height: 1.7;
        color: var(--text-color);
    }

    .important-message,
    .positive-message {
        font-size: 1.05rem;
        line-height: 1.7;
        color: var(--text-color);
        margin-bottom: 1rem;
        font-weight: 500;
    }

    .source-cite {
        display: block;
        font-style: italic;
        color: var(--primary-color);
        font-size: 0.9rem;
        margin-top: 1rem;
    }

    .pray-button {
        width: 100%;
        margin-top: 1.5rem;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        color: white;
        border: none;
        border-radius: var(--radius-lg);
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        font-family: var(--font-body);
    }

    .pray-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(103, 58, 183, 0.4);
    }

    .pray-button:active {
        transform: translateY(0);
    }

    .pray-button.prayed {
        background: #4CAF50;
        cursor: default;
    }

    .pray-button.prayed::after {
        content: ' ‚úì';
    }

    @media (max-width: 768px) {
        .daily-reflection-section {
            padding: 3rem 0;
        }

        .daily-header h2 {
            font-size: 2rem;
        }

        .reflection-grid {
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        .reflection-card {
            padding: 1.5rem;
        }

        .card-icon {
            font-size: 2rem;
        }
    }
</style>

<script is:inline>
    function prayIntention() {
        const button = event.target;
        if (!button.classList.contains('prayed')) {
            button.classList.add('prayed');
            button.textContent = 'Thank You for Praying';

            // Store in localStorage so it persists for the day
            const today = new Date().toDateString();
            localStorage.setItem('prayedToday', today);
        }
    }

    // Check if user already prayed today on page load
    document.addEventListener('DOMContentLoaded', function() {
        const button = document.querySelector('.pray-button');
        const today = new Date().toDateString();
        const prayedToday = localStorage.getItem('prayedToday');

        if (prayedToday === today && button) {
            button.classList.add('prayed');
            button.textContent = 'Thank You for Praying';
        }
    });
</script>
